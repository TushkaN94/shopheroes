<!DOCTYPE html>
<html>
  <head>
    <title>Shop Heroes Team Builder</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta charset="utf-8">
    <meta name="Description" content=""/>
    <link rel="stylesheet" type="text/css" href="jquery/css/jquery-ui.min.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="select2/css/select2.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/sh.css?v=a.2.0.1" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/tooltip.css?v=a.2.0.1" media="screen"/>
    <script type="text/javascript" src="jquery/js/jquery.min.js"></script>
    <script type="text/javascript" src="jquery/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="select2/js/select2.min.js"></script>
    <script type="text/javascript" src="vue/js/vue.js"></script>
    <script type="text/javascript" src="js/styles.js?v=a.2.0.1"></script>
    <script type="text/javascript" src="js/cache.js?v=a.2.0.1"></script>
    <script type="text/javascript" src="data/supplementaries.js?v=a.2.0.1"></script>
    <script type="text/javascript" src="data/skills.js?v=a.2.0.1"></script>
    <script type="text/javascript" src="data/buildings.js?v=a.2.0.1"></script>
    <script type="text/javascript" src="data/items.js?v=a.2.0.1"></script>
    <script type="text/javascript" src="data/heroes.js?v=a.2.0.1"></script>
    <script type="text/javascript" src="js/main.js?v=a.2.0.1"></script>
  </head>
  <body>
    <div id="tabs">
      <ul>
        <li>
          <a href="#tabs-teams">Teams</a>
        </li>
        <li>
          <a href="#tabs-heroes">Heroes</a>
        </li>
        <li>
          <a href="#tabs-items">Items</a>
        </li>
        <li>
          <a href="#tabs-buildings">Buildings</a>
        </li>
        <li>
          <a href="#tabs-data">Data</a>
        </li>
      </ul>
      <div id="tabs-data">
        <div>
          <select id="tabs-data-type">
            <option value="supplementaries">Supplementaries</option>
            <option value="skills">Skills</option>
            <option value="buildings">Buildings</option>
            <option value="items">Items</option>
            <option value="heroes">Heroes</option>
            <option value="teams">Teams</option>
          </select>
          <input id="tabs-data-load" type="button" value="Load Base"/>
          <input id="tabs-data-clean" type="button" value="Clean Customs"/>
          <input id="tabs-data-get" type="button" value="Get Customs"/>
          <input id="tabs-data-set" type="button" value="Set Customs"/>
        </div>
        <div>
          <textarea id="tabs-data-json"></textarea>
        </div>
      </div>
      <div id="tabs-heroes">
      </div>
      <div id="tabs-teams">
      </div>
      <div id="tabs-items">
      </div>
      <div id="tabs-buildings">
      </div>
    </div>
  </body>
  <script type="text/x-template" id="templates-select2">
    <select>
      <slot/>
    </select>
  </script>
  <script type="text/x-template" id="templates-power">
    <div v-if="power.value">
      <span class="htooltip" v-if="!!power.info">
        <span>{{power.info}}</span>
      </span>
      <span class="power">
        {{power.value.intString()}}
      </span>
    </div>
  </script>
  <script type="text/x-template" id="templates-skill">
    <div v-if="skill">
      <input v-if="view == 'item'" type="checkbox" class="float right" v-model="skill.m" />
      <span :class="{inactive: ( view != 'item' ) && !skill.active}" class="float left">
        <span class="htooltip">
          <span>{{summary.info}}</span>
        </span>
        {{skill.name}}
      </span>
      <span class="float right">
        {{summary.value}}
      </span>
    </div>
  </script>
  <script type="text/x-template" id="templates-items">
    <div>
      <table class="shopheroes item">
        <thead>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <th class="name">Name</th>
            <th class="type">Type</th>
            <th class="level">Level</th>
            <th class="power">Power</th>
            <th class="item">Skill</th>
          </tr>
          <tr>
            <td>
              <div>
                <input type="search" placeholder="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.type" :options="options.type.list" :placeholder="'Choose type'" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <input class="lv" v-model="filters.lv.min"/>
                <span>&nbsp;-&nbsp;</span>
                <input class="lv" v-model="filters.lv.max"/>
              </div>
            </td>
            <td/>
            <td>
              <div>
                <select2 v-model="filters.skill" :options="options.skills.list" :placeholder="'Choose skill'" :tags="true" :style="'width: 100%;'"/>
              </div>
            </td>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <item v-for="( item, i ) in items" v-show="visible( item )" :item="item" :key="i"/>
        </tbody>
        <tfoot>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-item">
      <tr>
        <td>
          <div>
            {{item.name}}
          </div>
        </td>
        <td>
          <div>
            {{item.type}}
          </div>
        </td>
        <td>
          <div>
            {{item.lv}}
          </div>
        </td>
        <td>
          <div>
            <power :power="{ value: item.power }"/>
          </div>
        </td>
        <td>
          <skill :skill="item.skill" :view="'item'" />
        </td>
      </tr>
  </script>
  <script type="text/x-template" id="templates-buildings">
    <div>
      <table class="shopheroes building">
        <thead>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <th class="name">Name</th>
            <th class="type">Type</th>
            <th class="level">Level</th>
            <th class="level">CJs Level</th>
          </tr>
          <tr>
            <td>
              <div>
                <input type="search" placeholder="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.type" :options="options.type.list" :placeholder="'Choose type'" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <input class="lv" v-model="filters.lv.min"/>
                <span>&nbsp;-&nbsp;</span>
                <input class="lv" v-model="filters.lv.max"/>
              </div>
            </td>
            <td>
              <div>
                <input class="lv" v-model="filters.cj.min"/>
                <span>&nbsp;-&nbsp;</span>
                <input class="lv" v-model="filters.cj.max"/>
              </div>
            </td>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <building v-for="( building, i ) in buildings" v-show="visible( building )" :building="building" :key="i"/>
        </tbody>
        <tfoot>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-building">
      <tr>
        <td>
          <div>
            <input type="checkbox" class="float right" v-model="building.m"/>
            {{building.name}}
          </div>
        </td>
        <td>
          <div>
            {{building.type}}
          </div>
        </td>
        <td>
          <div>
            <input class="lv" v-model="building.lv"/>
            <span>&nbsp;/&nbsp;</span>
            <span>{{building.cap}}</span>
          </div>
        </td>
        <td>
          <div>
            <input class="lv" v-model="building.cj.lv"/>
            <span>&nbsp;/&nbsp;</span>
            <span>{{building.cj.cap}}</span>
          </div>
        </td>
      </tr>
  </script>
  <script type="text/x-template" id="templates-heroes">
    <div>
      <table class="shopheroes hero filter">
        <thead>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="header">
            <th class="name">Name</th>
            <th class="level">Level</th>
            <th class="type">Type</th>
            <th class="type">Tier</th>
            <th class="type">Sex</th>
            <th class="item">Building</th>
            <th class="item">Skill #1</th>
            <th class="item">Skill #2</th>
            <th class="item">Skill #3</th>
          </tr>
          <tr>
            <td>
              <div>
                <input type="search" placeholder="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td>
              <div>
                <input class="lv" v-model="filters.lv.min"/>
                <span>&nbsp;-&nbsp</span>
                <input class="lv" v-model="filters.lv.max"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.type" :options="options.type.list" :placeholder="'Choose type'" :tags="true" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.tier" :options="options.tier.list" :placeholder="'Choose tier'" :nosearch="true" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.sex" :options="options.sex.list" :placeholder="'Choose sex'" :nosearch="true" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.building" :options="options.building.list" :placeholder="'Choose building'" :style="'width: 100%;'"/>
              </div>
            </td>
            <td colspan="3">
              <div>
                <select2 v-model="filters.skill" :options="options.skills.list" :placeholder="'Choose skill'" :tags="true" :style="'width: 100%;'"/>
              </div>
            </td>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <hero v-for="( hero, i ) in heroes" v-show="visible( hero )" :hero="hero" :key="i"/>
        </tbody>
        <tfoot>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-hero">
          <tr>
            <th>
              <div>
                {{hero.name}}
              </div>
            </th>
            <td>
              <div>
                <input class="lv" v-model="hero.lv"/>
                <span>&nbsp;/&nbsp;</span>
                <span>{{hero.cap}}</span>
              </div>
            </td>
            <td>
              <div>
                {{hero.type}}
              </div>
            </td>
            <td>
              <div>
                Tier {{hero.tier}}
              </div>
            </td>
            <td>
              <div>
                {{hero.sex}}
              </div>
            </td>
            <td>
              <div>
                {{hero.building}}
              </div>
            </td>
            <td v-for="k in 3"><skill :skill="skills[k-1]" :view="'hero'"/></td>
          </tr>
  </script>
  <script type="text/x-template" id="templates-teams">
    <div>
      <table class="shopheroes team filter">
        <thead>
          <tr class="split">
            <th class="slot"></th>
            <th class="name"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <th>
              <span class="button add" @click="add"/>
            </th>
            <th>
              Name
            </th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <th>
              <span class="button undo float left" @click="undo"/>
              <span class="button redo float right" @click="redo"/>
            </th>
            <td>
              <div>
                <input type="search" placeholder="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </thead>
        <team v-for="( team, i ) in teams" v-show="visible( team )" :team="team" :key="i"/>
        <tfoot>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-team">
        <tbody>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <th>
              <span class="button remove float left" @click="remove( team )"/>
              <span class="button float right" :class="edit ? 'apply' : 'edit'" @click="edit = !edit"/>
            </th>
            <th>
              <input v-if="edit" v-model="team.name"/>
              <span v-else>{{team.name}}</span>
            </th>
            <th>
              <power :power="summary.power"/>
            </th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <template v-if="summary.skills">
            <tr v-for="k in get_k( summary.skills.length, 8 )">
              <th></th>
              <td v-for="j in 8">
                <div>
                  <skill :skill="summary.skills[8*(k-1)+j-1]" :view="'hero'" />
                </div>
              </td>
            </tr>
          </template>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <template v-for="k in summary.companions" v-if="( edit || team.roster[k-1].name )">
            <template v-for="th in [ team.roster[k-1] ]">
              <template v-for="sh in [ summary.roster[k-1] ]">
                <tr>
                  <th>
                    #{{k}}
                  </th>
                  <th>
                    <div>
                      <select2 v-if="edit" v-model="th.name" :options="options.heroes.list" :placeholder="'Choose hero'"/>
                      <span v-else>{{th.name}}</span>
                    </div>
                  </th>
                  <th>Weapon</th>
                  <th>Body</th>
                  <th>Head</th>
                  <th>Hands</th>
                  <th>Legs</th>
                  <th>Aux #1</th>
                  <th>Aux #2</th>
                </tr>
                <tr v-if="sh">
                  <th></th>
                  <td>
                    <power :power="sh.power"/>
                  </td>
                  <td v-for="j in 7">
                    <div v-if="sh.items[j-1]">
                      <span class="float left power">
                        <power :power="sh.items[j-1].power"/>
                      </span>
                      <span class="float right break">
                        {{sh.items[j-1].chance}}%
                      </span>
                    </div>
                  </td>
                </tr>
                <tr v-if="sh">
                  <th></th>
                  <td>
                    <skill :skill="sh.skills.hero[0]" view="'hero'"/>
                  </td>
                  <td v-for="j in 7">
                    <div v-if="sh.items[j-1]">
                      <select2 v-if="edit" v-model="th.slots[j-1].item" :options="sh.items[j-1].list" :placeholder="'Choose item'"/>
                      <span v-else>{{th.slots[j-1].q}}</span>
                    </div>
                  </td>
                </tr>
                <tr v-if="sh">
                  <th></th>
                  <td>
                    <skill :skill="sh.skills.hero[1]" view="'hero'"/>
                  </td>
                  <td v-for="j in 7">
                    <div v-if="sh.items[j-1]">
                      <select2 v-if="edit" v-model="th.slots[j-1].q" :options="options.quality.list" :placeholder="'Choose quality'"/>
                      <span v-else>{{th.slots[j-1].item}}</span>
                    </div>
                  </td>
                </tr>
                <tr v-if="sh">
                  <th></th>
                  <td>
                    <skill :skill="sh.skills.hero[2]" view="'hero'"/>
                  </td>
                  <td v-for="j in 7">
                    <div v-if="sh.skills.items[j-1]">
                      <skill :skill="sh.skills.items[j-1]" :view="'hero'"/>
                    </div>
                  </td>
                </tr>
              </template>
            </template>
          </template>
        </tbody>
    </div>
  </script>
</html>