<!DOCTYPE html>
<html>
  <head>
    <title>Shop Heroes Team Builder</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta charset="utf-8">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="Description" content=""/>
    <link rel="stylesheet" type="text/css" href="jquery/css/jquery-ui.min.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="select2/css/select2.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/sh.css?v=2.7.1" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/icons.css?v=2.7.1" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/tooltip.css?v=2.7.1" media="screen"/>
    <script type="text/javascript" src="jquery/js/jquery.min.js"></script>
    <script type="text/javascript" src="jquery/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/cache.js?v=2.7.1"></script>
    <script async type="text/javascript" src="select2/js/select2.min.js"></script>
    <script async type="text/javascript" src="vue/js/vue.js"></script>
    <script async type="text/javascript" src="data/supplementaries.js?v=2.7.1"></script>
    <script async type="text/javascript" src="data/skills.js?v=2.7.1"></script>
    <script async type="text/javascript" src="data/buildings.js?v=2.7.1"></script>
    <script async type="text/javascript" src="data/quests.js?v=2.7.1"></script>
    <script async type="text/javascript" src="data/items.js?v=2.7.1"></script>
    <script async type="text/javascript" src="data/heroes.js?v=2.7.1"></script>
    <script type="text/javascript" src="js/main.js?v=2.7.1"></script>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107341279-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments)};
      gtag('js', new Date());
      gtag('config', 'UA-107341279-1');
    </script>
  </head>
  <body>
    <div id="tabs">
      <ul>
        <li>
          <a href="#tabs-help">Help</a>
        </li>
        <li>
          <a href="#tabs-teams">Teams</a>
        </li>
        <li>
          <a href="#tabs-heroes">Heroes</a>
        </li>
        <li>
          <a href="#tabs-items">Items</a>
        </li>
        <li>
          <a href="#tabs-buildings">Buildings</a>
        </li>
        <li>
          <a href="#tabs-quests">Quests</a>
        </li>
        <li>
          <a href="#tabs-data">Data</a>
        </li>
      </ul>
      <div id="tabs-help">
        <h1>Hello, visitor!</h1>
        <p>
        <p>The main idea of this site is to provide functionality for building team setups.</p>
        <p>I developed this site to use it in offline mode, it doesn't use server as backend, so you can't share links on setups, nor you can share your setups between different medias.</p>
        <p>Well, lies, you actually can share setups, that's why there's Data tab, but using it is tricky.</p>

        <h2>Credits</h2>
        <p>I want to thank all those people created and maintaining <a href="http://bit.ly/shopheroes" target="_blank">Shop Heroes Spreadsheet</a> for this is an incredible source of ingame data!</p>
        <p>And I give my due respects to creators of Team Builder Redux for insiping me to make this site.</p>
        
        <h2>Basics</h2>
        <p>Adjust your heroes, items and city upgrades at appropriate tabs:
        <ul>
        <li>at <b>Heroes</b> tab you can adjust heroes levels;</li>
        <li>at <b>Items</b> tab you can adjust which items skills you have mastered. Mark them with checkbox;</li>
        <li>at <b>Buildings</b> tab adjust building level and crown jewels upgrades level.</li>
        </ul>
        All those tables can be filtered many ways, so you can faster navigate to specific item/hero you need.
        </p>

        <h2>Teams</h2>
        <p>Now you can proceed to <b>Teams</b> tab and start your party assembling</p>
        <p>First add new team by clicking <i>plus</i> button.</p>
        <p>Now you can start edit it by clicking <i>pencil</i> button on the left of team name. Set the team name and add heroes to it's roster. Checkbox near hero power emulates bulding boost bonus.</p>
        
        <h2>Data</h2>
        <p>You can export and import custom data (ie changes info).</p>
        <p>Select an option and do what you want:
        <ul>
        <li>click <b>Clean</b> button to clear all changes made to base info but beware as this is unrecoverable operation;</li>
        <li>click <b>Get</b> button to get all changed data to a text area below - you can save it to a file for future use;</li>
        <li>place previously custom changes to text area and click <b>Set</b> button to load new custom data.</li>
        </ul>
        </p>
        
        <h2>Have fun in game!</h2>
        <p>You can help developing site!</p>
        <p>Send me email with your feedback to <a href="mailto:zarusjamer@gmail.com?subject=Shop Heroes Team Builder">zarusjamer@gmail.com</a>.</p>
        <p>You can also contribute code and designs at <a href="https://github.com/zarusjamer/shopheroes">Git Hub</a> project page.</p>
      </div>
      <div id="tabs-data">
        <div>
          <select id="tabs-data-type">
            <option value="buildings">Buildings</option>
            <option value="items">Items</option>
            <option value="heroes">Heroes</option>
            <option value="teams">Teams</option>
          </select>
          <input id="tabs-data-clean" type="button" value="Clean"/>
          <input id="tabs-data-get" type="button" value="Get"/>
          <input id="tabs-data-set" type="button" value="Set"/>
        </div>
        <div>
          <textarea id="tabs-data-json"></textarea>
        </div>
      </div>
      <div id="tabs-heroes">
      </div>
      <div id="tabs-teams">
      </div>
      <div id="tabs-items">
      </div>
      <div id="tabs-buildings">
      </div>
      <div id="tabs-quests">
      </div>
    </div>
  </body>
  <script type="text/x-template" id="templates-select2">
    <select>
      <slot/>
    </select>
  </script>
  <script type="text/x-template" id="templates-power">
    <span class="float-left" v-if="power.value">
      <span class="htooltip icon power">
        <span class="htooltip-text" v-if="!!power.info">{{power.info}}</span>
      </span>
      <span>{{power.value.intString()}}</span>  
    </span>
  </script>
  <script type="text/x-template" id="templates-skill">
    <span v-if="skill">
      <span class="float-left">
        <span class="htooltip icon skill" :class="[ summary.icon.asIconPath() ]">
          <span class="htooltip-text">{{summary.info}}</span>
        </span>
        <span :class="{inactive: ( view != 'item' ) && !skill.active}">{{skill.name}}</span>
      </span>
      <span class="float-right">{{summary.value}}</span>
    </span>
  </script>
  <script type="text/x-template" id="templates-item-slot">
    <span class="htooltip icon item" :class="[ itemSlot.type.asIconPath(), 'i-affinity' + itemSlot.a ]">
      <span class="htooltip-text">{{summary}}</span>
    </span>
  </script>
  <script type="text/x-template" id="templates-items">
    <div>
      <table class="shopheroes item">
        <thead>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <th class="name" colspan="2">
              <div>
                <span>Name</span>
              </div>
            </th>
            <th class="type">
              <div>
                <span>Type</span>
                <span class="icon-sortable float-right" :class="[ sorts.type ]" @click="add_sort( $event, 'type' )">
                  <span class="top">&#9650;</span>
                  <span class="bot">&#9660;</span>
                </span>
              </div>
            </th>
            <th class="level">
              <div>
                <span>Level</span>
                <span class="icon-sortable float-right" :class="[ sorts.lv ]" @click="add_sort( $event, 'lv' )">
                  <span class="top">&#9650;</span>
                  <span class="bot">&#9660;</span>
                </span>
              </div>
            </th>
            <th class="power">
              <div>
                <span>Power</span>
              </div>
            </th>
            <th class="item">
              <div>
                <span>Skill</span>
              </div>
            </th>
          </tr>
          <tr>
            <td colspan="2">
              <div>
                <input type="search" choicetext="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.type" :options="options.types" :choicetext="'Choose type'"/>
              </div>
            </td>
            <td>
              <div>
                <input type="number" class="lv" v-model.number="filters.lv.min"/>
                <span>&nbsp;-&nbsp;</span>
                <input type="number" class="lv" v-model.number="filters.lv.max"/>
              </div>
            </td>
            <td>
            </td>
            <td>
              <div>
                <select2 v-model="filters.skill" :options="options.skills" :choicetext="'Choose skill'"/>
              </div>
            </td>
          </tr>
          <tr>
            <th colspan="2">
              <div>
                <span>Origin</span>
              </div>
            </th>
            <th>
              <div>
                <span>Rarity</span>
              </div>
            </th>
            <th>
              <div>
                <span>XP</span>
              </div>
            </th>
            <th>
              <div>
                <span>Price</span>
              </div>
            </th>
            <th>
              <div>
                <span>Precrafts</span>
              </div>
            </th>
          </tr>
          <tr>
            <td colspan="2">
              <div>
                <select2 v-model="filters.origin" :options="options.origins" :choicetext="'Choose origin'"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.rarity" :options="options.rarities" :choicetext="'Choose rarity'"/>
              </div>
            </td>
            <td>
            </td>
            <td>
            </td>
            <td>
              <div>
                <div style="width: 50% !important; display: inline-block;">
                  <input v-model="filters.pre.name" type="search" choicetext="Type in name" class="name"/>
                </div>
                <div style="width: 45% !important; display: inline-block;">
                  <select2 v-model="filters.pre.q" :options="options.qualities" :choicetext="'Choose quality'"/>
                </div>
              </div>
            </td>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <item v-for="i in itemsSorted" v-show="visible( items[i] )" :item="items[i]" :key="i"/>
        <tfoot>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-item">
        <tbody>
          <tr>
            <th rowspan="2">
              <div>
                <span class="icon medium item" :class="[ item.type.asIconPath(), 'i-' + item.name.asIconPath() ]"/>
              </div>
            </th>
            <th>
              <div>
                <span>{{item.name}}</span>
              </div>
            </th>
            <td>
              <div>
                <span class="float-left icon item" :class="[ item.type.asIconPath() ]"/>
                <span>{{item.type}}</span>
              </div>
            </td>
            <td>
              <div>
                <span>{{item.lv}}</span>
              </div>
            </td>
            <td>
              <div>
                <power :power="{ value: item.power }"/>
              </div>
            </td>
            <td>
              <div class="data-info" v-if="item.skill">
                <span class="float-left htooltip">
                  <span class="htooltip-text">{{'Mark as {0}mastered'.format( item.skill.m ? 'un' : '' )}}</span>
                  <input type="checkbox" v-model="item.skill.m" />
                </span>
                <span class="float-left icon quality" :class="item.skill.q.asIconPath()" />
                <skill :skill="item.skill" :view="'item'" />
              </div>
            </td>
          </tr>
          <tr>
            <td>
              <div>
                <span>{{item.origin}}</span>
              </div>
            </td>
            <td>
              <div>
                <span>{{item.rarity}}</span>
              </div>
            </td>
            <td>
              <div>
                <span>{{item.xp.intString()}}</span>
              </div>
            </td>
            <td>
              <div>
                <span>{{item.price.intString()}}</span>
              </div>
            </td>
            <td>
              <div style="text-align: left;">
                <template v-for="pi in item.pre" v-if="item.pre">
                  <span class="htooltip">
                    <span class="htooltip-text">{{"{0} {1}".format( pi.q, pi.item )}}</span>
                    <span class="icon quality" :class="[ pi.q.asIconPath() ]" />
                    <span class="icon item" :class="[ 'i-' + pi.item.asIconPath() ]" />
                  </span>
                </template>
              </div>
            </td>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tbody>
  </script>
  <script type="text/x-template" id="templates-buildings">
    <div>
      <table class="shopheroes building">
        <thead>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <th class="name">Name</th>
            <th class="type">Type</th>
            <th class="level">Level</th>
            <th class="level">CJs Level</th>
          </tr>
          <tr>
            <td>
              <div>
                <input type="search" choicetext="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.type" :options="options.types" :choicetext="'Choose type'"/>
              </div>
            </td>
            <td>
              <div>
                <input type="number" class="lv" v-model.number="filters.lv.min"/>
                <span>&nbsp;-&nbsp;</span>
                <input type="number" class="lv" v-model.number="filters.lv.max"/>
              </div>
            </td>
            <td>
              <div>
                <input type="number" class="lv" v-model.number="filters.cj.min"/>
                <span>&nbsp;-&nbsp;</span>
                <input type="number" class="lv" v-model.number="filters.cj.max"/>
              </div>
            </td>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <building v-for="( building, i ) in buildings" v-show="visible( building )" :building="building" :key="i"/>
        </tbody>
        <tfoot>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-building">
      <tr>
        <th>
          <span>{{building.name}}</span>
        </th>
        <td>
          <span>{{building.type}}</span>
        </td>
        <td>
          <div>
            <input type="number" class="lv" v-model.number.lazy="building.lv"/>
            <span>&nbsp;/&nbsp;</span>
            <span>{{building.cap}}</span>
          </div>
        </td>
        <td>
          <div>
            <input type="number" class="lv" v-model.number.lazy="building.cj.lv"/>
            <span>&nbsp;/&nbsp;</span>
            <span>{{building.cj.cap}}</span>
          </div>
        </td>
      </tr>
  </script>
  <script type="text/x-template" id="templates-heroes">
    <div>
      <table class="shopheroes hero filter">
        <thead>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="data-info">
            <th class="name" colspan="2">
              <div>
                <span>Name</span>
              </div>
            </th>
            <th class="item">
              <div>
                <span>Level</span>
              </div>
            </th>
            <th class="item">
              <div>
                <span>Type</span>
              </div>
            </th>
            <th class="item">
              <div>
                <span>Tier</span>
              </div>
            </th>
            <th class="item">
              <div>
                <span>Sex</span>
              </div>
            </th>
            <th class="item">
              <div>
                <span>Origin</span>
              </div>
            </th>
            <th class="item">
            </th>
            <th class="item">
            </th>
          </tr>
          <tr class="data-info">
            <td colspan="2">
              <div>
                <input type="search" choicetext="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td>
              <div>
                <input type="number" class="lv" v-model.number="filters.lv.min"/>
                <span>&nbsp;-&nbsp</span>
                <input type="number" class="lv" v-model.number="filters.lv.max"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.type" :options="options.types" :choicetext="'Choose type'" :nosearch="true"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.tier" :options="options.tiers" :choicetext="'Choose tier'" :nosearch="true"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.sex" :options="options.sex" :choicetext="'Choose sex'" :nosearch="true"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filters.origin" :options="options.origins" :choicetext="'Choose building'"/>
              </div>
            </td>
            <td colspan="2">
              <div>
                <select2 v-model="filters.skill" :options="options.skills" :choicetext="'Choose skill'"/>
              </div>
            </td>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <hero v-for="( hero, i ) in heroes" v-show="visible( hero )" :hero="hero" :key="i"/>
        <tfoot>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-hero">
        <tbody>
          <tr class="data-info">
            <th rowspan="3">
              <div>
                <span class="icon medium hero" :class="hero.name.asIconPath()"></span>
              </div>
            </th>
            <th>
              <div>
                <span>{{hero.name}}</span>
              </div>
            </th>
            <td>
              <div>
                <input v-if="edit" type="number" class="lv" v-model.number.lazy="hero.lv"/>
                <span v-else>{{hero.lv}}</span>
                <span>&nbsp;/&nbsp;</span>
                <span>{{hero.cap}}</span>
              </div>
            </td>
            <td>
              <div>
                <span>{{hero.type}}</span>
              </div>
            </td>
            <td>
              <div>
                <span>Tier {{hero.tier}}</span>
              </div>
            </td>
            <td>
              <div>
                <span>{{hero.sex}}</span>
              </div>
            </td>
            <td>
              <div>
                <span>{{hero.origin}}</span>
              </div>
            </td>
            <td>
            </td>
            <td>
            </td>
          </tr>
          <tr class="data-info">
            <th>
              <div>
                <span class="button float-left" :class="[ edit ? 'apply' : 'edit' ]" @click="edit = !edit"/>
              </div>
            </th>
            <th v-for="j in 7">
              <div>
                <item-slot v-for="( slot, i ) in hero.items[j-1]" :item-slot="slot" :key="i"/>
              </div>  
            </th>
          </tr>
          <tr class="data-info">
            <td>
              <div>
                <span class="float-right htooltip">
                  <span class="htooltip-text">{{'Set {0} boost {1}'.format( hero.origin, ( hero.b ? 'disabled' : 'enabled' ) )}}</span>
                  <input type="checkbox" v-model="hero.b"/>
                </span>
                <power :power="summary.power"/>
              </div>
            </td>
            <td v-for="j in 7">
              <div v-if="summary.slots[j-1].name">
                <power :power="summary.slots[j-1].power"/>
                <span class="float-right break">{{summary.slots[j-1].chance.pptString(1)}}</span>
              </div>
            </td>
          </tr>
          <tr class="data-info">
            <td colspan="2">
              <div>
                <skill :skill="summary.skills.hero[0]" view="'hero'"/>
              </div>  
            </td>
            <td v-for="j in 7" :rowspan="edit ? 1 : 2"> 
              <div class="data-info">
                <select2 v-if="edit" v-model="hero.slots[j-1].item" :options="summary.items[j-1]" :choicetext="'Choose item'"/>
                <template v-for=" ss in [ summary.slots[j-1] ]" v-if="!edit && ss.name">
                  <span class="float-right icon quality" :class="ss.q.asIconPath()" v-if="ss.q"/>
                  <span class="icon medium item" :class="[ ss.type.asIconPath(), 'i-' + ss.name.asIconPath() ]"/>
                  <span class="float-left icon">{{ss.lv}}</span>
                </template>
              </div>
            </td>
          </tr>
          <tr class="data-info">
            <td colspan="2">
              <div>
                <skill :skill="summary.skills.hero[1]" view="'hero'"/>
              </div>
            </td>
            <td v-for="j in 7" v-if="edit">
              <div>
                <select2 v-model="hero.slots[j-1].q" :options="options.qualities" :choicetext="'Choose quality'"/>
              </div>
            </td>
          </tr>
          <tr class="data-info">
            <td colspan="2">
              <div>
                <skill :skill="summary.skills.hero[2]" view="'hero'"/>
              </div>
            </td>
            <td v-for="j in 7">
              <div v-if="summary.skills.items[j-1]">
                <skill :skill="summary.skills.items[j-1]" :view="'hero'"/>
              </div>
            </td>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tbody>  
  </script>
  <script type="text/x-template" id="templates-teams">
    <div>
      <table class="shopheroes team filter">
        <thead>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="data-info">
            <th class="slot">
              <span class="button add" @click="add"/>
            </th>
            <th class="name" colspan="2">
              Name
            </th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
            <th class="item"></th>
          </tr>
          <tr class="data-info">
            <th></th>
            <td colspan="2">
              <div>
                <input type="search" choicetext="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td>
              <span class="button undo float-left" @click="undo" :class="history.pos == 0 ? 'hidden' : ''"/>
              <span class="button redo float-right" @click="redo" :class="history.pos == history.states.length - 1 ? 'hidden' : ''"/>
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </thead>
        <team v-for="( team, i ) in teams" v-show="visible( team )" :team="team" :key="i"/>
        <tfoot>
          <tr class="split">
            <th></th>
            <th colspan="2"></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th colspan="2"></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-team">
        <tbody>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="data-info">
            <th>
              <div>
                <span class="button float-left" :class="[ edit ? 'apply' : 'edit' ]" @click="edit = !edit"/>
              </div>
            </th>
            <th>
              <div>
                <span class="button remove float-left" @click="remove( team )"/>
              </div>
            </th>
            <th>
              <div>
                <input v-if="edit" v-model="team.name"/>
                <span v-else>{{team.name}}</span>
              </div>
            </th>
            <th>
              <div>
                <power :power="summary.power"/>
              </div>
            </th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <template v-if="summary.skills">
            <tr v-for="k in get_k( summary.skills.length, 8 )" class="data-info">
              <th></th>
              <td v-for="j in 8" :colspan="[ j == 1 ? 2 : 1 ]">
                <div>
                  <skill :skill="summary.skills[8*(k-1)+j-1]" :view="'hero'" />
                </div>
              </td>
            </tr>
          </template>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <template v-for="( th, k ) in team.roster" v-if="( edit || th.name && k < summary.companions )">
            <template v-for="sh in [ summary.roster[k] ]">
              <tr class="data-info">
                <th>
                  <div>
                    <span>#{{k+1}}</span>
                  </div>
                </th>
                <th class="left" :rowspan="[ th.name ? 2 : 1 ]">
                  <div v-if="th.name">
                    <span class="float-left icon medium hero" :class="th.name.asIconPath()"></span>
                  </div>
                </th>
                <th class="left name">
                  <div>
                    <select2 v-if="edit" v-model="th.name" :options="options.heroes[k]" :choicetext="'Choose hero'" @input="set_roster(k)"/>
                    <span v-else="th.name">
                      <span class="float-left icon">{{sh.hero.lv}}</span>
                      <span>{{sh.hero.name.replace( /\s+/g, '&nbsp;' )}}</span>
                    </span>
                  </div>
                </th>
                <th v-for="j in 7">
                  <div v-if="th.name">
                    <item-slot v-for="( slot, i ) in sh.hero.items[j-1]" :item-slot="slot" :key="i"/>
                  </div>  
                </th>
              </tr>
              <template v-if="th.name">
                <tr class="data-info">
                  <th>
                    <div>
                      <span class="button float-left" :class="[ edit ? 'apply' : 'edit' ]" @click="edit = !edit"/>
                    </div>
                  </th>
                  <td>
                    <div>
                      <span v-if="sh.building.b" class="float-right htooltip">
                        <span class="htooltip-text">{{'Set {0} boost {1}'.format( sh.building.name, ( th.b ? 'disabled' : 'enabled' ) )}}</span>
                        <input type="checkbox" v-model="th.b" @change="set_boost( sh.building.name, th.b )"/>
                      </span>
                      <power :power="sh.power"/>
                    </div>
                  </td>
                  <td v-for="j in 7">
                    <div v-if="sh.slots[j-1].name">
                      <power :power="sh.slots[j-1].power"/>
                      <span class="float-right break">{{sh.slots[j-1].chance.pptString(1)}}</span>
                    </div>
                  </td>
                </tr>
                <tr class="data-info">
                  <th></th>
                  <td colspan="2">
                    <div>
                      <skill :skill="sh.skills.hero[0]" view="'hero'"/>
                    </div>  
                  </td>
                  <td v-for="j in 7" :rowspan="edit ? 1 : 2"> 
                    <div>
                      <select2 v-if="edit" v-model="th.slots[j-1].item" :options="sh.items[j-1]" :choicetext="'Choose item'"/>
                      <template v-for=" ss in [ sh.slots[j-1] ]" v-if="!edit && ss.name">
                        <span class="float-right icon quality" :class="ss.q.asIconPath()" v-if="ss.q"/>
                        <span class="icon medium item" :class="[ ss.type.asIconPath(), 'i-' + ss.name.asIconPath() ]"/>
                        <span class="float-left icon">{{ss.lv}}</span>
                      </template>
                    </div>
                  </td>
                </tr>
                <tr class="data-info">
                  <th></th>
                  <td colspan="2">
                    <div>
                      <skill :skill="sh.skills.hero[1]" view="'hero'"/>
                    </div>
                  </td>
                  <td v-for="j in 7" v-if="edit">
                    <div>
                      <select2 v-model="th.slots[j-1].q" :options="options.qualities" :choicetext="'Choose quality'"/>
                    </div>
                  </td>
                </tr>
                <tr class="data-info">
                  <th></th>
                  <td colspan="2">
                    <div>
                      <skill :skill="sh.skills.hero[2]" view="'hero'"/>
                    </div>
                  </td>
                  <td v-for="j in 7">
                    <div v-if="sh.skills.items[j-1]">
                      <skill :skill="sh.skills.items[j-1]" :view="'hero'"/>
                    </div>
                  </td>
                </tr>
              </template>
            </template>
          </template>
        </tbody>
  </script>
  <script type="text/x-template" id="templates-quests">
    <div>
      <table class="shopheroes quest filter">
        <thead>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="data-info">
            <th class="name" colspan="3">
              <div>
                <span>Name</span>
              </div>
            </th>
            <th class="item" colspan="2">
              <div>
                <span>Tier I</span>
              </div>
            </th>
            <th class="item" colspan="2">
              <div>
                <span>Tier II</span>
              </div>
            </th>
            <th class="item" colspan="2">
              <div>
                <span>Tier III</span>
              </div>
            </th>
            <th class="item" colspan="2">
              <div>
                <span>Tier IV</span>
              </div>
            </th>
            <th class="item" colspan="2">
              <div>
                <span>Tier V</span>
              </div>
            </th>
            <th class="item" colspan="2">
              <div>
                <span>Cleared</span>
              </div>
            </th>
          </tr>
          <tr class="data-info">
            <td colspan="3">
              <div>
                <input type="search" choicetext="Type in name" class="name" v-model="filters.name"/>
              </div>
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </thead>
        <quest v-for="( quest, i ) in quests" v-show="visible( quest )" :quest="quest" :key="i"/>
        <tfoot>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-quest">
        <tbody>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="split">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr class="data-info">
            <th rowspan="2">
              <div>
                <span class="icon medium quest" :class="[ quest.name.asIconPath() ]"/>
              </div>
            </th>
            <th>
              <div>
                <span>{{quest.name}}</span>
              </div>
            </th>
            <th>
              <div>
                <span>Team</span>
              </div>
            </th>
            <td v-for="j in 6" colspan="2">
              <div>
              </div>
            </td>
          </tr>
          <tr class="data-info">
            <td>
              <div>
                <span>{{quest.time.dateString()}}</span>
              </div>
            </td>
            <th>
              <div>
                <span>Group</span>
              </div>
            </th>
            <td v-for="j in 6" colspan="2">
              <div v-if="quest.tiers[j-1]">
                <power :power="{ value: quest.tiers[j-1].power || quest.power }" />
              </div>
            </td>
          </tr>
          <tr class="data-info">
            <th>
              <div v-if="quest.key">
                <span class="icon key" :class="quest.key"/>
              </div>
            </th>
            <td>
              <div v-if="quest.key">
                <span>{{quest.key}}</span>
              </div>
            </td>
            <th>
              <div>
                <span>Normal</span>
              </div>
            </th>
            <template v-for="j in 6">
              <td>
                <div v-if="quest.tiers[j-1] && quest.tiers[j-1].base">
                  <power :power="{ value: quest.tiers[j-1].base.power }" />
                </div>
              </td>
              <td>
                <div v-if="quest.tiers[j-1] && quest.tiers[j-1].base">
                  <span class="float-right">{{quest.tiers[j-1].base.xp.toLocaleString()}}</span>
                </div>
              </td>
            </template>
          </tr>
          <tr class="data-info">
            <th>
              <div v-if="quest.bag">
                <span class="icon bag" :class="quest.bag.asIconPath()"/>
              </div>
            </th>
            <td>
              <div v-if="quest.bag">
                <span>{{quest.bag}}</span>
              </div>
            </td>
            <th>
              <div>
                <span>Boss</span>
              </div>
            </th>
            <template v-for="j in 6">
              <td>
                <div v-if="quest.tiers[j-1] && quest.tiers[j-1].boss">
                  <power :power="{ value: quest.tiers[j-1].boss.power }" />
                </div>
              </td>
              <td>
                <div v-if="quest.tiers[j-1] && quest.tiers[j-1].boss">
                  <span class="float-right">{{quest.tiers[j-1].boss.xp.toLocaleString()}}</span>
                </div>
              </td>
            </template>
          </tr>
          <tr class="data-info">
            <th>
              <div v-if="quest.item">
                <span class="icon quest" :class="[ quest.item.asIconPath() ]"/>
              </div>
            </th>
            <td>
              <div v-if="quest.item">
                <span>{{quest.item}}</span>
              </div>
            </td>
            <th>
              <div>
                <span>Count</span>
              </div>
            </th>
            <template v-for="j in 6">
              <td>
                <div v-if="quest.tiers[j-1] && quest.tiers[j-1].loot">
                  <span class="float-right">{{quest.tiers[j-1].loot.min}}</span>
                </div>
              </td>
              <td>
                <div v-if="quest.tiers[j-1] && quest.tiers[j-1].loot">
                  <span class="float-left">{{quest.tiers[j-1].loot.max}}</span>
                </div>
              </td>
            </template>
          </tr>
        </tbody>
  </script>
</html>