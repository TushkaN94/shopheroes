<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>Shop Heroes Team Builder</title>
    <meta http-equiv="Content-Type" content="text/html; charset=uft-8"/>
    <meta name="Description" content=""/>
    <link rel="stylesheet" type="text/css" href="jquery/css/jquery-ui.min.css?v=1" media="screen"/>
    <link rel="stylesheet" type="text/css" href="select2/css/select2.css?v=1" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/sh.css?v=1" media="screen"/>
  </head>
  <body>
    <div id="tabs">
      <ul>
        <li>
          <a href="#tabs-items">Items</a>
        </li>
        <li>
          <a href="#tabs-heroes">Heroes</a>
        </li>
        <li>
          <a href="#tabs-teams">Teams</a>
        </li>
        <li>
          <a href="#tabs-data">Data</a>
        </li>
      </ul>
      <div id="tabs-data">
        <div>
          <select id="tabs-data-type">
            <option value="supplementaries">Supplementaries</option>
            <option value="heroes">Heroes</option>
            <option value="items">Items</option>
            <option value="teams">Teams</option>
          </select>
          <input id="tabs-data-load" type="button" value="Load"></input>
          <input id="tabs-data-remove" type="button" value="Remove"></input>
        </div>
      </div>
      <div id="tabs-heroes">
      </div>
      <div id="tabs-items">
      </div>
      <div id="tabs-teams">
      </div>
    </div>
  </body>
  <script type="text/javascript" src="jquery/js/jquery.min.js"></script>
  <script type="text/javascript" src="jquery/js/jquery-ui.min.js"></script>
  <script type="text/javascript" src="select2/js/select2.min.js"></script>
  <script type="text/javascript" src="vue/js/vue.js"></script>
  <script type="text/javascript" src="js/cache.js"></script>
  <script type="text/javascript" src="js/main.js"></script>
  <script type="text/x-template" id="templates-select2">
    <select>
      <slot/>
    </select>
  </script>
  <script type="text/x-template" id="templates-skill">
    <div>
      <span class="float-left" v-if="skill.lv">{{skill.lv}}</span>
      <span class="skill" :class="{inactive:!skill.active}">{{skill.name}}</span>
    </div>
  </script>
  <script type="text/x-template" id="templates-heroes">
    <div>
      <table class="shopheroes hero filter">
        <tbody>
          <tr class="header">
            <th class="name" colspan="2">Name</th>
            <th>Type</th>
            <th>Tier</th>
            <th>Sex</th>
            <th>Level</th>
            <th>Power</th>
            <th>Skills</th>
          </tr>
          <tr>
            <td colspan="2">
              <div>
                <input type="search" placeholder="Type in name" class="name" v-model="filter.name"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filter.type" :options="options.type" :placeholder="'Choose type'" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filter.tier" :options="options.tier" :placeholder="'Choose tier'" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filter.sex" :options="options.sex" :placeholder="'Choose sex'" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <input type="search" class="lv" v-model="filter.lv.min"/>
                <span>&nbsp;-&nbsp</span>
                <input type="search" class="lv" v-model="filter.lv.max"/>
              </div>
            </td>
            <td/>
            <td>
              <div>
                <select2 v-model="filter.skill" :options="options.skill" :placeholder="'Choose skill'" :search="true" :style="'width: 100%;'"/>
              </div>
            </td>
          </tr>
          <tr>
            <th class="item">Weapon</th>
            <th class="item">Body</th>
            <th class="item">Head</th>
            <th class="item">Arms</th>
            <th class="item">Legs</th>
            <th class="item">Accessory&nbsp;1</th>
            <th class="item">Accessory&nbsp;2</th>
            <th class="skill name"/>
          </tr>
          <tr class="header">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tbody>
        <hero v-for="( hero, i ) in heroes" v-if="!hero.hidden" :hero="hero" :key="i"/>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-hero">
        <tbody>
          <tr>
            <th class="name" colspan="2">{{hero.name}}</th>
            <td>{{hero.type}}</td>
            <td>Tier {{hero.tier}}</td>
            <td>{{hero.sex}}</td>
            <td>
              <div>
                <input class="lv" v-model="hero.lv"/>
                <span>&nbsp;/&nbsp;</span>
                <span>{{hero.cap}}</span>
              </div>
            </td>
            <td>
              {{parseInt(summary.power).toLocaleString()}}
            </td>
            <td></td>
          </tr>
          <tr>
            <td v-for="( slot, key ) in hero.slots">
              <div>
                <div class="power">
                  {{parseInt(summary.slots[key].power).toLocaleString()}}
                </div>
                <div class="break">
                  {{(summary.slots[key].break*100).toFixed(1)}}%
                </div>
              </div>
            </td>
            <td>
              <skill :skill="summary.skills[0]"/>
            </td>
          </tr>
          <tr>
            <td v-for="( slot, key ) in hero.slots">
              <div>
                <select2 v-model="slot.item" :options="equippables[key]" :search="'1'" :placeholder="'Choose item'"/>
              </div>
            </td>
            <td>
              <skill :skill="summary.skills[1]"/>
            </td>
          </tr>
          <tr>
            <td v-for="( slot, key ) in hero.slots">
              <div>
                <select2 v-if="slot.item" v-model="slot.q" :options="qualities" :placeholder="'Choose quality'"/>
              </div>
            </td>
            <td>
              <skill :skill="summary.skills[2]"/>
            </td>
          </tr>
          <tr>
            <td v-for="( slot, key ) in hero.slots">
              <skill :skill="summary.slots[key].skill"/>
            </td>
            <th/>
          </tr>
          <tr class="header">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tbody>
  </script>
  <script type="text/x-template" id="templates-teams">
    <div>
      <div>
        <input type="button" @click="add" value="Add Team"/>
      </div>
      <div>
        <team v-for="( team, i ) in teams" :team="team" :key="i"/>
      </div>
    </div>
  </script>
  <script type="text/x-template" id="templates-team">
    <div>
      <table class="shopheroes team">
        <tbody>
          <tr class="header">
            <th rowspan="2" colspan="2" class="name">
              <input class="remove" type="button" value="X" @click="remove( team )"/>
              {{team.name}}
            </th>
            <th>Power</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <td>{{parseInt(summary.power).toLocaleString()}}</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <th class="slot">Slot</th>
            <th>Hero</th>
            <th>Weapon</th>
            <th>Body</th>
            <th>Head</th>
            <th>Arms</th>
            <th>Legs</th>
            <th>Accessory 1</th>
            <th>Accessory 2</th>
          </tr>
          <tr v-for="( slot, i ) in team.slots">
            <td>#{{i+1}}</td>
            <td>
              <div>
                <select2 v-model="team.slots[i]">
                  <option v-for="option in options( slot )" :value="option.name">{{option.name}}</option>
                </select2>
              </div>
            </td>
            <td>
              <div v-if="slots[i]" :class="slots[i].slots.weapon.q">
                {{slots[i].slots.weapon.item}}
              </div>
            </td>
            <td>
              <div v-if="slots[i]" :class="slots[i].slots.body.q">
                {{slots[i].slots.body.item}}
              </div>
            </td>
            <td>
              <div v-if="slots[i]" :class="slots[i].slots.head.q">
                {{slots[i].slots.head.item}}
              </div>
            </td>
            <td>
              <div v-if="slots[i]" :class="slots[i].slots.arms.q">
                {{slots[i].slots.arms.item}}
              </div>
            </td>
            <td>
              <div v-if="slots[i]" :class="slots[i].slots.legs.q">
                {{slots[i].slots.legs.item}}
              </div>
            </td>
            <td>
              <div v-if="slots[i]" :class="slots[i].slots.aux1.q">
                {{slots[i].slots.aux1.item}}
              </div>
            </td>
            <td>
              <div v-if="slots[i]" :class="slots[i].slots.aux2.q">
                {{slots[i].slots.aux2.item}}
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-items">
    <div>
      <table class="shopheroes item">
        <tbody>
          <tr>
            <th class="name"></th>
            <th class="type"></th>
            <th class="lv"></th>
            <th class="power"></th>
            <th class="skill name"></th>
            <th class="skill quality"></th>
          </tr>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Level</th>
            <th>Power</th>
            <th colspan="2">Skill</th>
          </tr>
          <tr>
            <td>
              <div>
                <input type="search" placeholder="Type in name" class="name" v-model="filter.name"/>
              </div>
            </td>
            <td>
              <div>
                <select2 v-model="filter.type" :search="true" :options="options.type" :placeholder="'Choose type'" :style="'width: 100%;'"/>
              </div>
            </td>
            <td>
              <div>
                <input type="search" class="lv" v-model="filter.lv.min"/>
                <span>&nbsp;-&nbsp;</span>
                <input type="search" class="lv" v-model="filter.lv.max"/>
              </div>
            </td>
            <td/>
            <td colspan="2">
              <div>
                <select2 v-model="filter.skill" :search="true" :options="options.skill" :placeholder="'Choose skill'" :style="'width: 100%;'"/>
              </div>
            </td>
          </tr>
          <tr class="header">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <item v-for="( item, i ) in items" v-if="!item.hidden" :item="item" :key="i"/>
          <tr class="header">
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </tbody>
      </table>
    </div>
  </script>
  <script type="text/x-template" id="templates-item">
      <tr>
        <td>
          {{item.name}}
        </td>
        <td>
          {{item.type}}
        </td>
        <td>
          {{item.lv}}
        </td>
        <td>
          {{item.power}}
        </td>
        <td>
          <span v-if="item.skill">
            {{item.skill.name}}
          </span>
        </td>
        <td>
          <span v-if="item.skill">
          {{item.skill.q}}
          </span>
        </td>
      </tr>
  </script>
</html>